#include <iostream>
#include "MathTools.h"
#include "MonteCarlo.h"
#include <limits.h>
#include "cudaTools.h"

using std::cout;
using std::endl;

/*----------------------------------------------------------------------*\
 |*			Declaration 					*|
 \*---------------------------------------------------------------------*/

/*--------------------------------------*\
 |*		Imported	 	*|
 \*-------------------------------------*/

/*--------------------------------------*\
 |*		Public			*|
 \*-------------------------------------*/

bool useMonteCarlo(void);

/*--------------------------------------*\
 |*		Private			*|
 \*-------------------------------------*/

/*----------------------------------------------------------------------*\
 |*			Implementation 					*|
 \*---------------------------------------------------------------------*/

/*--------------------------------------*\
 |*		Public			*|
 \*-------------------------------------*/

bool useMonteCarlo()
    {
    //int nbSlice = INT_MAX;
    int nbFleches = 400000000;
    int m = 20;

    dim3 dg = dim3(24, 1, 1);
    dim3 db = dim3(128, 1, 1);

    float pi;
    // SearchPI
	{
	MonteCarlo monteCarlo(nbFleches,m,dg,db);
	monteCarlo.process();
	pi = monteCarlo.getPi();
//	MonteCarlo slice(nbSlice, dg, db);
//	slice.process();
//	pi = slice.getPi();
	}
    cout << "Pi value = " << pi << endl;
    return MathTools::isEquals(pi, PI_FLOAT, 0.01f);
    }

/*--------------------------------------*\
 |*		Private			*|
 \*-------------------------------------*/

/*----------------------------------------------------------------------*\
 |*			End	 					*|
 \*---------------------------------------------------------------------*/
